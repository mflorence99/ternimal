<ternimal-table
  [hydrate]="false"
  [hydrateTrace]="true"
  [sortDir]="columnSort.sortDir"
  [sortedColumn]="columnSort.sortedColumn">

  <thead>
    <tr>

      <ng-container
        *ngFor="let dict of prefs.dictionary; trackBy: trackByDict">

        <th
          *ngIf="effectivePrefs.visibility[dict.name]"
          [id]="dict.name"
          sortable>
          {{ dict.tag }}
        </th>

      </ng-container>

    </tr>
  </thead>

  <!-- TODO: temporary -->

  <tbody>

    <tr
      *ngFor="let desc of files.snapshot[effectivePrefs.root]; trackBy: trackByDesc"
      [id]="desc.path">

      <ng-container
        *ngFor="let dict of prefs.dictionary">

        <td
          [ngClass]="{icon: dict.showIcon, mono: dict.showMono, quantity: dict.isQuantity}"
          *ngIf="effectivePrefs.visibility[dict.name]">

          <ng-container
            *ngIf="dict.isDate">

            <ng-container
              *ngIf="effectivePrefs.dateFormat === 'ago'">
              {{ desc[dict.name] | amTimeAgo }}
            </ng-container>

            <ng-container
              *ngIf="(effectivePrefs.dateFormat !== 'ago') && (effectivePrefs.timeFormat === 'none')">
              {{ desc[dict.name] | date:effectivePrefs.dateFormat }}
            </ng-container>

            <div
              *ngIf="(effectivePrefs.dateFormat !== 'ago') && (effectivePrefs.timeFormat !== 'none')"
              class="datetime">

              <div>
                {{ desc[dict.name] | date:effectivePrefs.dateFormat }}
              </div>

              <div>&nbsp;</div>

              <div>
                {{ desc[dict.name] | date:effectivePrefs.timeFormat }}
              </div>

            </div>

          </ng-container>

          <ng-container
            *ngIf="dict.isQuantity && desc[dict.name]">

            <ng-container
              *ngIf="effectivePrefs.quantityFormat === 'abbrev'">
              {{ desc[dict.name] | ternimalNumeral:'0a' }}
            </ng-container>

            <ng-container
              *ngIf="effectivePrefs.quantityFormat === 'bytes'">
              {{ desc[dict.name] | ternimalNumeral:'0b' }}
            </ng-container>

            <ng-container
              *ngIf="effectivePrefs.quantityFormat === 'number'">
              {{ desc[dict.name] | ternimalNumeral:'0,0' }}
            </ng-container>

          </ng-container>

          <ng-container
            *ngIf="dict.isQuantity && !desc[dict.name]">
            &ndash;
          </ng-container>

          <ng-container
            *ngIf="dict.isString">
            {{ desc[dict.name] }}
          </ng-container>

        </td>

      </ng-container>

    </tr>

  </tbody>

</ternimal-table>
